<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encyclopedia Test</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .test-result { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .pass { background: #d4edda; color: #155724; }
        .fail { background: #f8d7da; color: #721c24; }
        button { padding: 10px 20px; font-size: 16px; margin: 10px 5px; }
    </style>
</head>
<body>
    <h1>üìö Encyclopedia Test Page</h1>
    
    <div id="test-results"></div>
    
    <h2>Manual Tests</h2>
    <button onclick="testOpenEncyclopedia()">Test openEncyclopedia()</button>
    <button onclick="testInitEncyclopedia()">Test initEncyclopedia()</button>
    <button onclick="testRenderIndex()">Test renderEncyclopediaIndex()</button>
    
    <h2>Panel</h2>
    <div id="encyclopedia-panel" style="border: 2px solid #333; padding: 20px; margin: 20px 0;">
        <h3>Encyclopedia Panel</h3>
        <div id="encyclopedia-content" style="min-height: 200px; border: 1px dashed #666; padding: 10px;">
            Content will appear here
        </div>
    </div>
    
    <!-- Load dependencies -->
    <script src="catData.js"></script>
    <script src="encyclopedia.js"></script>
    
    <script>
        // Mock gameState
        window.gameState = {
            collectedCats: new Set([1, 2, 3, 5, 8])
        };
        
        // Run tests
        const results = document.getElementById('test-results');
        
        function addResult(test, pass, message) {
            const div = document.createElement('div');
            div.className = `test-result ${pass ? 'pass' : 'fail'}`;
            div.innerHTML = `<strong>${test}:</strong> ${pass ? '‚úÖ PASS' : '‚ùå FAIL'} - ${message}`;
            results.appendChild(div);
        }
        
        // Test 1: Check if encyclopedia.js loaded
        addResult('Script Load', typeof CAT_FACTS !== 'undefined', 
            typeof CAT_FACTS !== 'undefined' ? 'CAT_FACTS object exists' : 'CAT_FACTS not found');
        
        // Test 2: Check if functions are exposed
        addResult('initEncyclopedia', typeof window.initEncyclopedia === 'function',
            typeof window.initEncyclopedia === 'function' ? 'Function exists on window' : 'Function not found');
        
        addResult('openEncyclopedia', typeof window.openEncyclopedia === 'function',
            typeof window.openEncyclopedia === 'function' ? 'Function exists on window' : 'Function not found');
        
        addResult('renderEncyclopediaIndex', typeof window.renderEncyclopediaIndex === 'function',
            typeof window.renderEncyclopediaIndex === 'function' ? 'Function exists on window' : 'Function not found');
        
        addResult('showBreedGuide', typeof window.showBreedGuide === 'function',
            typeof window.showBreedGuide === 'function' ? 'Function exists on window' : 'Function not found');
        
        // Test 3: Check catData.js loaded
        addResult('CAT_BREEDS', typeof CAT_BREEDS !== 'undefined' && CAT_BREEDS.length > 0,
            CAT_BREEDS ? `${CAT_BREEDS.length} breeds loaded` : 'CAT_BREEDS not found');
        
        // Manual test functions
        function testOpenEncyclopedia() {
            console.log('üß™ Testing openEncyclopedia()...');
            if (window.openEncyclopedia) {
                window.openEncyclopedia();
            } else {
                alert('‚ùå openEncyclopedia not found!');
            }
        }
        
        function testInitEncyclopedia() {
            console.log('üß™ Testing initEncyclopedia()...');
            if (window.initEncyclopedia) {
                window.initEncyclopedia();
                alert('‚úÖ initEncyclopedia called - check console');
            } else {
                alert('‚ùå initEncyclopedia not found!');
            }
        }
        
        function testRenderIndex() {
            console.log('üß™ Testing renderEncyclopediaIndex()...');
            if (window.renderEncyclopediaIndex) {
                window.renderEncyclopediaIndex();
                alert('‚úÖ renderEncyclopediaIndex called - check content div');
            } else {
                alert('‚ùå renderEncyclopediaIndex not found!');
            }
        }
    </script>
</body>
</html>
